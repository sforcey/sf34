<html>
<head>
<title>Javascript Spiral</title>
	
<script src="complex.js"></script>	
</head>
<body>
<script>


var animate = window.requestAnimationFrame || window.webkitRequestAnimationFrame ||
          window.setTimeout(callback, 1000 / 60 );

var canvas = document.createElement("canvas");
var width = 1100;
var height = 900;
var count = 1

	
//var xorig =   -0.26;
//var yorig = 0.6337;	

//var xorig =   -0.145 ;
//var yorig = 0.654;	

//var xorig =   -0.145 ;
//var yorig = 0.645;

//var xorig =   -0.259997 ;
//var yorig = 0.635000000001;

//var xorig =   -0.2599966743 ; //6 callbacks
//var yorig = 0.6350001;

//var xorig =   -0.25999667432 ; //3 callbacks, smallest radius
//var yorig = 0.6350001;

//var xorig =   -0.2599966743201 ; //4 callbacks, 
//var yorig = 0.6350001;


//var xorig =   -0.26 ;
//var yorig = 0.635;

//var xorig =   -0.26001 ;
//var yorig = 0.635000000001;

//var xorig = -1.1;
//var yorig = .22;

//document.write('<h3> c = ' + xorig +' + '+ yorig +'i'+ ' ...Or //enter your own starting point <a //href="http://www.math.uakron.edu/~sf34/mandelseqi.htm"> here! //</a> </h3>');

// = = -0.25 + 0.6355558i

var num1 = prompt('Enter your real part : ', '-.25');
var num2 = prompt('Enter your imaginary part : ', '.16');
var num3 = prompt('Enter your zoom, 500 to 1500: ', '900');
var num4 = prompt('Enter your point size in pixels: ', '5');


document.write('You have entered : ' + num1 +' + '+ num2 +'i');

var xorig = parseFloat(num1);
 var yorig = parseFloat(num2);
var zoom = parseFloat(num3);
var size = parseFloat(num4);




x2 = ((xorig*xorig) - (yorig*yorig)) + xorig;
    y2 = (2*xorig*yorig) + yorig;
var xshift = zoom*((xorig+x2)/2 + 1.9)-550 ;
var yshift = zoom*((yorig+y2)/2 + 1.1)-550 ;
var a= 0;
var C =1;	
var x = 0 ;
var y = 0 ;
var nit = 0;
var tmpx = 1;
var tmpy = 0;
canvas.width = width;
canvas.height = height;
var context = canvas.getContext("2d");
	
function factorial(num) {
  if (num < 0) 
        return -1;
  else if (num == 0) 
      return 1;
  else {
      return (num * factorial(num - 1));
  }
};
 
var update = function() { 
    tmpx = x;
    tmpy = y;
	x=tmpx*xorig-tmpy*yorig;
	y=tmpy*xorig+tmpx*yorig;
    //x = ((tmpx*tmpx) - (tmpy*tmpy)) + xorig;
    //y = (2*tmpx*tmpy) + yorig;
  

   C = C * 2 * (2 * nit + 1) / (nit + 2);
  
          /*a=0;
          b=0;
          for(var k = 0; k < nit+2; k++){
            if(k%4 == 0)
               a = a+ ((factorial(nit+1))/((factorial(k))*(factorial(nit+1-k))))*(Math.pow(yorig,k))*(Math.pow(xorig,nit+1-k));
            else if(k%4 == 1)
               b = b + ((factorial(nit+1))/((factorial(k))*(factorial(nit+1-k))))*(Math.pow(yorig,k))*(Math.pow(xorig,nit+1-k));
            else if(k%4 == 2)
               a = a -  ((factorial(nit+1))/((factorial(k))*(factorial(nit+1-k))))*(Math.pow(yorig,k))*(Math.pow(xorig,nit+1-k));
            else if(k%4 == 3)
              b = b - ((factorial(nit+1))/((factorial(k))*(factorial(nit+1-k))))*(Math.pow(yorig,k))*(Math.pow(xorig,nit+1-k));
            } 
          x= x+ a *(1/(nit+1))*((factorial(2*nit))/((factorial(nit))*(factorial(nit))));
          y= y+ b *(1/(nit+1))*((factorial(2*nit))/((factorial(nit))*(factorial(nit))));*/
	x= x+ x * C;
          y= y+ y * C;
  };
	

var colorChange = function() {
count = count+1;
	console.log('count = ' + count + ', x = ' + x + ',  y = ' + y);
if ((count % 7 == 1)) {


context.fillStyle = "#55BB00" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, size, size);

}
else if ((count % 7 == 2)) {


context.fillStyle = "#445599" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, size, size);
}
else if ((count % 7 == 3)) {

context.fillStyle = "#880077" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, size, size);
}
else if ((count % 7 == 4)) {

context.fillStyle = "#00BB11" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, size, size);
}
else if ((count % 7 == 5)) {


context.fillStyle = "#756785" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, size, size);
}
else if ((count % 7 == 6)) {


context.fillStyle = "#5500FF" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, size, size);
}
else
{

context.fillStyle = "#880088" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, size, size);
}
};

/* This variant makes bordered points...
var BorderedcolorChange = function() {
count = count+1
if ((count % 7 == 1)) {
context.fillStyle = "#990000" 
context.fillRect(zoom*(x+1.9)-xshift+7, zoom*(y+1.1)-yshift+7, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift+5, zoom*(y+1.1)-yshift+5, 2, 2);
context.fillStyle = "#990000" 
context.fillRect(zoom*(x+1.9)-xshift-2, zoom*(y+1.1)-yshift-2, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift-1, zoom*(y+1.1)-yshift-1, 3, 3);
context.fillStyle = "#990000" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, 6, 6);
}
else if ((count % 7 == 2)) {
context.fillStyle = "#FF7777" 
context.fillRect(zoom*(x+1.9)-xshift+7, zoom*(y+1.1)-yshift+7, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift+5, zoom*(y+1.1)-yshift+5, 2, 2);context.fillStyle = "#FF7777" 
context.fillRect(zoom*(x+1.9)-xshift-2, zoom*(y+1.1)-yshift-2, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift-1, zoom*(y+1.1)-yshift-1, 3, 3);
context.fillStyle = "#FF7777" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, 6, 6);
}
else if ((count % 7 == 3)) {
context.fillStyle = "#999999" 
context.fillRect(zoom*(x+1.9)-xshift+7, zoom*(y+1.1)-yshift+7, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift+5, zoom*(y+1.1)-yshift+5, 2, 2);context.fillStyle = "#999999" 
context.fillRect(zoom*(x+1.9)-xshift-2, zoom*(y+1.1)-yshift-2, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift-1, zoom*(y+1.1)-yshift-1, 3, 3);
context.fillStyle = "#999999" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, 6, 6);
}
else if ((count % 7 == 4)) {
context.fillStyle = "#009900" 
context.fillRect(zoom*(x+1.9)-xshift+7, zoom*(y+1.1)-yshift+7, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift+5, zoom*(y+1.1)-yshift+5, 2, 2);context.fillStyle = "#009900" 
context.fillRect(zoom*(x+1.9)-xshift-2, zoom*(y+1.1)-yshift-2, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift-1, zoom*(y+1.1)-yshift-1, 3, 3);
context.fillStyle = "#009900" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, 6, 6);
}
else if ((count % 7 == 5)) {
context.fillStyle = "#000099" 
context.fillRect(zoom*(x+1.9)-xshift+7, zoom*(y+1.1)-yshift+7, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift+5, zoom*(y+1.1)-yshift+5, 2, 2);
context.fillStyle = "#000099" 
context.fillRect(zoom*(x+1.9)-xshift-2, zoom*(y+1.1)-yshift-2, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift-1, zoom*(y+1.1)-yshift-1, 3, 3);
context.fillStyle = "#000099" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, 6, 6);
}
else if ((count % 7 == 6)) {
context.fillStyle = "#5500FF" 
context.fillRect(zoom*(x+1.9)-xshift+7, zoom*(y+1.1)-yshift+7, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift+5, zoom*(y+1.1)-yshift+5, 2, 2);
context.fillStyle = "#5500FF" 
context.fillRect(zoom*(x+1.9)-xshift-2, zoom*(y+1.1)-yshift-2, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift-1, zoom*(y+1.1)-yshift-1, 3, 3);
context.fillStyle = "#5500FF" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, 6, 6);
}
else
{
context.fillStyle = "#880088" 
context.fillRect(zoom*(x+1.9)-xshift+7, zoom*(y+1.1)-yshift+7, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift+5, zoom*(y+1.1)-yshift+5, 2, 2);
context.fillStyle = "#880088" 
context.fillRect(zoom*(x+1.9)-xshift-2, zoom*(y+1.1)-yshift-2, 1, 1);
context.fillStyle = "#ffffff" 
context.fillRect(zoom*(x+1.9)-xshift-1, zoom*(y+1.1)-yshift-1, 3, 3);
context.fillStyle = "#880088" 
context.fillRect(zoom*(x+1.9)-xshift, zoom*(y+1.1)-yshift, 6, 6);
}
};
*/


var step = function() {
 colorChange();
 update();
 animate(step);
};



document.body.appendChild(canvas);
animate(step);

    </script>
</head>
<body>
    
</body>
</html>
